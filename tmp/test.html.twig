<ul>
  {% for link in links if link.url is not "#" %}
    <li>
      {% set title, url = link.title, link.url %}
      <a href="{{ url }}" title="{{ title }}">{{ link.text }}</a>
    </li>
  {% endfor %}
</ul>

<h2>Test `loop` variable; nested loops</h2>{#

Comments are ignored

#}<ul>
  {% for link in links %}
    <li>
      {% set title, url = link.title, link.url %}
      {{ loop.index }}. <a href="{{ url }}" title="{{ title }}">{{ link.text }}</a>
      first: {{ loop.first }}, last: {{ loop.last }}, revindex: {{ loop.revindex }}, revindex0: {{ loop.revindex0 }}
      Looping through it {{ link|json_encode }}
      {% for key, val in link %}
        {{ key }} => {{ val|json_encode }}
      {% endfor %}
    </li>
  {% endfor %}
</ul>

{% set aye = "aye" %}
{% set nope = "nope" %}
<p>{{ 'foo' not in { foo: 1, bar: 2 } ? "-#{aye}-" : "-#{nope}-" }}</p>

{% macro link(url, text) %}
  <a href="{{ url }}">{{ text }}</a>
{% endmacro link %}

{% for i in 10..1 if (i % 2) is not 0 %}
  <li>{{ i }}</li>
{% endfor %}

{% for i in [1, 2, 3, 4, 5] if i > 6 %}
  <p>HAS {{i}}</p>
{% else %}
  <p>None found</p>
{%- endfor %}

<p>{{ not not "false" }}</p>

{{ _self.link("http://bar.com/", "bar" ) }}

{{ links }}

{% do 3 + 4 %}

{# with { foo: links[1].url, bar: 2 } %}
  check {{ foo }} mak
  {{ links.length }}
{% endwith #}

{{ "foo" ~ links[2].url }}

{{ "foo #{links[2].url} bar" }}

{{ cycle(1..3, 5) }}

{% if blerg is not defined %}
  no `blerg`
{% endif %}

{{ -20 // 7 }}

{% if 9 is divisible by(3) %}
  YAAAAAAAAAS
{% endif %}
